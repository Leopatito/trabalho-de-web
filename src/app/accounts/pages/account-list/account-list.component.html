<div class="account-list-container">

  <header class="topbar">
    <div class="left-area" (click)="goToDashboard()" class="branding-clickable">
      <span class="material-icons icon-money">attach_money</span>
      <div class="brand">Finanças Pessoais</div>
    </div>
    <div class="right-area">
      <div class="user-avatar">
        <img [src]="userAvatar || 'https://via.placeholder.com/40'"
             [alt]="userName || 'Usuário'"
             class="avatar-img"
             (click)="navigateToProfile()">
      </div>
    </div>
  </header>

  <nav class="sidebar" [class.collapsed]="isCollapsed">
    <div class="sidebar-content">

      <button class="toggle-btn" (click)="toggleSidebar()">
        <span class="material-icons">{{ isCollapsed ? 'menu' : 'close' }}</span>
      </button>

      <a routerLink="/dashboard" class="nav-item">
        <span class="material-icons">home</span>
        <span class="label">Dashboard</span>
      </a>

      <a routerLink="/accounts" class="nav-item">
        <span class="material-icons">account_balance_wallet</span>
        <span class="label">Minhas Contas</span>
      </a>

      <a routerLink="/goals" routerLinkActive="active" class="nav-item">
        <span class="material-icons">receipt_long</span>
        <span class="label">Metas</span>
      </a>

      <a routerLink="/transactions" class="nav-item">
        <span class="material-icons">rocket_launch</span>
        <span class="label">Lançamentos</span>
      </a>

      <a routerLink="/categories" class="nav-item">
        <span class="material-icons">category</span>
        <span class="label">Categorias</span>
      </a>

      <a routerLink="/profile" class="nav-item">
        <span class="material-icons">person</span>
        <span class="label">Perfil</span>
      </a>

      <button class="nav-item logout" (click)="onLogout()">
        <span class="material-icons">logout</span>
        <span class="label">Sair</span>
      </button>

    </div>
  </nav>

  <!-- Cabeçalho -->
  <div class="header">
    <h2>Minhas Contas</h2>

    <button class="btn-new" (click)="newAccount()">
      Nova Conta
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    Carregando...
  </div>

  <!-- Cards das contas -->
  <div *ngIf="!loading && accounts.length > 0" class="accounts-grid">

    <div
      class="account-card"
      *ngFor="let acc of accounts"
      [style.boxShadow]="'0 6px 15px ' + acc.color"
    >

      <div class="account-header">

        <!-- Ícone opcional definido pelo usuário -->
        <i *ngIf="acc.icon"
           [class]="acc.icon"
           class="account-icon"
           [style.color]="acc.color">
        </i>

        <div class="account-name" [style.color]="acc.color">
          {{ acc.name }}
        </div>

      </div>

      <div class="account-type">
        {{ getAccountTypeLabel(acc.type) }}
      </div>

      <div class="account-balance" [style.color]="acc.color">
        {{ acc.currentBalance | currency:'BRL':'symbol':'1.2-2' }}
      </div>

      <div class="actions">

        <button class="btn btn-edit" (click)="edit(acc.id!)">
          Editar
        </button>

        <button class="btn btn-extract" (click)="statement(acc.id)">
          Extrato
        </button>

        <button class="btn btn-delete" (click)="delete(acc)">
          Excluir
        </button>

      </div>

    </div>
  </div>

  <!-- Sem contas -->
  <div *ngIf="!loading && accounts.length === 0" class="empty">
    Nenhuma conta cadastrada.
  </div>

</div>
